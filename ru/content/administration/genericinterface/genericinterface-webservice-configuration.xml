<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE section PUBLIC "-//OASIS//DTD DocBook XML V4.4//EN" "http://www.oasis-open.org/docbook/xml/4.4/docbookx.dtd">

<section id="genericinterface-webservice-configuration">
    <title>Конфигурация Веб-сервиса</title>
    <para>
        From its design the web services were conceived to be portable from one OTRS
system to another, e.g. from a test or development environment to a
production system. Therefore it was needed to have an easy way to extract
the web service configuration from the database, and import it to
another. To accomplish this task the Generic Interface uses YAML files as
the web services configuration basis.
    </para>
    <para>
        Почему YAML? YAML это язык разметки, разработанный специально
человекочитаемым и удобным для написания (он более понятен чем  JSON), не
имеет некоторых ограничений XML, таких как числовые тэги, он открыт,
стандартизован и полностью удовлетворяет задаче хранения всех настроек
веб-сервисов.
    </para>
    <note>
        <para>
            Чтобы узнать больше о YAML пожалуйста посетите ссылку <ulink
url="http://www.yaml.org/">http://www.yaml.org/</ulink>.
        </para>
    </note>
    <para>
        Ниже приводится конфигурация веб-сервера на основе файла конфигурации в
форматеYAML:
    </para>
    <para>
        <programlisting><![CDATA[
---
Debugger:
  DebugThreshold: debug
Description: This an example of a web service configuration
Provider:
  Operation:
    CloseIncident:
      Description: This is a test operation
      MappingInbound: {}
      MappingOutbound: {}
      RemoteSystemGuid: ''
      Type: Test::Test
    Test:
      Description: This is a test operation
      MappingInbound:
        Config:
          KeyMapDefault:
            MapTo: ''
            MapType: Keep
          KeyMapExact:
            Prio: Priority
          ValueMap:
            Priority:
              ValueMapExact:
                Critical: 5 Very High
                Information: 1 Very Low
                Warning: 3 Normal
          ValueMapDefault:
            MapTo: 3 Normal
            MapType: MapTo
        Type: Simple
      MappingOutbound:
        Config:
          KeyMapDefault:
            MapTo: ''
            MapType: Ignore
          KeyMapExact:
            Priority: Prio
          ValueMap:
            Prio:
              ValueMapExact:
                1 Very Low: Information
                3 Normal: Warning
                5 Very High: Critical
          ValueMapDefault:
            MapTo: ''
            MapType: Ignore
        Type: Simple
      Type: Test::Test
  Transport:
    Config:
      MaxLength: 10000000
      NameSpace: http://www.example.com/actions
    Type: HTTP::SOAP
RemoteSystem: remote.system.description.example.com
Requester:
  Invoker:
    Test:
      Description: This is a test invoker
      Events:
        - Asynchronous: 1
          Event: TicketCreate
        - Asynchronous: 0
          Event: ArticleUpdate
      MappingInbound:
        Type: Simple
      MappingOutbound:
        Type: Simple
      Type: Test::Test
  Transport:
    Config:
      Authentication:
        Password: '*******'
        Type: BasicAuth
        User: otrs
      Encoding: utf-8
      Endpoint: http://www.example.com:8080/endpoint
      NameSpace: http://www.example.com/actions
      SOAPAction: Yes
      SOAPActionSeparator: '#'
    Type: HTTP::SOAP
            ]]>
        </programlisting>
    </para>
    <section>
        <title>
            Описание Конфигурации
        </title>
        <section>
            <title>
                Общий
            </title>
            <itemizedlist mark="round">
                <listitem>
                    <para>
                        Описание: краткий текст, описывающий веб-сервис.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        RemoteSystem: краткое описание Удаленной Системы.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Debugger: хранилище для хранения настроек отладчика.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Provider: хранилище для хранения настроек поставщика.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Requester: хранилище для хранения настроек о запрашивающей стороне.
                    </para>
                </listitem>
            </itemizedlist>
        </section>

        <section>
            <title>
                Отладчик
            </title>
            <itemizedlist mark="round">
                <listitem>
                    <para>
                        DebugThreshold: the debugger level.
                    </para>
                    <itemizedlist mark="round">
                        <title>
                            Возможные значения
                        </title>
                        <listitem>
                            <para>
                                debug: все журналы хранятся в базе данных.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                info: информация, уведомления и журнал ошибкок хранятся в базе данных.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                notice: ошибки уровня уведомление (notice) и ошибка (error) хранятся в базе
данных.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                error: только ошибки уровня error хранятся в базе данных.
                            </para>
                        </listitem>

                    </itemizedlist>
                </listitem>
            </itemizedlist>
        </section>

        <section>
            <title>Поставщик</title>
            <itemizedlist mark="round">
                <listitem>
                    <para>
                        Operation: хранилище для настроек каждой операции.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Transport: хранилище для настроек поставщика транспортой сети.
                    </para>
                </listitem>
            </itemizedlist>
            <section>
                <title>Операция</title>
                <itemizedlist mark="round">
                    <listitem>
                        <para>
                            &lt;OperationName&gt;: Уникальное название операции, хранилище для своих
собственных настроек (от 0..n, но без повторений).
                        </para>
                    </listitem>
                </itemizedlist>
                <section>
                    <title>&lt;OperationName&gt;</title>
                    <para>
                        Этот раздел основан на операция с типом "Test::Test" другие операции могут
содержать больше или другие настройки.
                    </para>
                    <itemizedlist mark="round">
                        <listitem>
                            <para>
                                Описание: краткий текст, описывающий операцию.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                MappingInbound: хранилище для настроек отображаемых данных для данных из
входящего запроса.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                MappingOutbound: хранилище для отображающихся настроек для исходящих данных.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Тип бэкэнд операция в формате Controller::Operation.
                            </para>
                        </listitem>
                    </itemizedlist>
                    <section>
                        <title>MappingInbound</title>
                        <para>
                            Этот раздел основан на отображаемых значениях с типом "Simple". Другие
отображаемые значения могут содержать больше или другие настройки.
                        </para>
                        <itemizedlist mark="round">
                            <listitem>
                                <para>
                                    Config: хранилище настроек для этих отображаемых значений.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    Тип: mapping backend.
                                </para>
                            </listitem>

                        </itemizedlist>
                            <section>
                                <title>Config</title>
                                <itemizedlist mark="round">
                                    <listitem>
                                        <para>
                                            KeyMapDefault: хранилище для всех не отображаемых значений ключей.
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            ValueMapDefault: хранилище для всех не отображаемых значений настроек.
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            KeyMapExact: хранилище для всех ключей точных отображаемых значений(от 0
.. 1).
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            KeyMapRegEx: хранилище для отображаемых значений всех регулярных выражений.
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            ValueMap: хранилище для всех значений отображений (mapping-a).
                                        </para>
                                    </listitem>
                                </itemizedlist>
                                <section>
                                    <title>
                                        KeyMapDefault
                                    </title>
                                    <itemizedlist mark="round">
                                        <listitem>
                                            <para>
                                                MapTo: новое значение, которое будет использоваться (применима только если
параметр MapType установлен в значение MapTo).
                                            </para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                MapType: правило для отображения.
                                            </para>
                                            <itemizedlist>
                                                <title>Возможные значения</title>
                                                <listitem>
                                                    <para>
                                                        Keep: оставить без изменений.
                                                    </para>
                                                </listitem>
                                                <listitem>
                                                    <para>
                                                        Ignore: понизить.
                                                    </para>
                                                </listitem>
                                                <listitem>
                                                    <para>
                                                        MapTo: заменить на значение MapTo.
                                                    </para>
                                                </listitem>
                                            </itemizedlist>
                                        </listitem>
                                    </itemizedlist>
                                </section>
                                <section>
                                    <title>
                                        ValueMapDefault
                                    </title>
                                    <para>
                                        Тоже что и KeyMapDefault.
                                    </para>
                                </section>
                                <section>
                                    <title>
                                        KeyMapExact
                                    </title>
                                    <itemizedlist mark="round">
                                        <listitem>
                                            <para>
                                                &lt;oldkey&gt;: &lt;newkey&gt; (от 0 .. n но без повторений).
                                            </para>
                                        </listitem>
                                    </itemizedlist>
                                </section>
                                <section>
                                    <title>
                                        KeyMapRegEx
                                    </title>
                                    <itemizedlist mark="round">
                                        <listitem>
                                            <para>
                                                &lt;oldkey(RegEx)&gt;: &lt;newkey&gt; ( от 0 .. n но без повторений).
                                            </para>
                                        </listitem>
                                    </itemizedlist>
                                </section>
                                <section>
                                    <title>
                                        ValueMap
                                    </title>
                                    <itemizedlist mark="round">
                                        <listitem>
                                            <para>
                                                &lt;newkey&gt;: контейнер для отображаемых значений для этого нового ключа
(зависит от новых ключей от  KeyMapExact и KeyMapRegEx).
                                            </para>
                                        </listitem>
                                    </itemizedlist>
                                    <section>
                                        <title>
                                            &lt;newkey&gt;
                                        </title>
                                        <itemizedlist mark="round">
                                            <listitem>
                                                <para>
                                                    ValueMapExact: хранилище для всех точных отображаемых значений (от 0 .. 1).
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ValueMapRegEx: хранилище для отображаемых значений всех регулярных выражений
(от 0 .. 1).
                                                </para>
                                            </listitem>
                                        </itemizedlist>
                                        <section>
                                            <title>
                                                ValueMapExact
                                            </title>
                                            <itemizedlist mark="round">
                                                <listitem>
                                                    <para>
                                                        &lt;oldvalue&gt;: &lt;newvalue&gt; ( cardinality 0 .. n без повторений).
                                                    </para>
                                                </listitem>
                                            </itemizedlist>
                                        </section>
                                        <section>
                                            <title>
                                                ValueMapRegEx
                                            </title>
                                            <itemizedlist mark="round">
                                                <listitem>
                                                    <para>
                                                        &lt;oldvalue(RegEx)&gt;: &lt;newvalue&gt; ( от 0 .. n без повторений).
                                                    </para>
                                                </listitem>
                                            </itemizedlist>
                                        </section>
                                    </section>
                                </section>
                            </section>
                    </section>
                    <section>
                        <title>MappingOutbound</title>
                        <para>
                            Тоже что и MappingInbound.
                        </para>
                    </section>
                    <section>
                        <title>Передача</title>
                        <para>
                            Этот раздел основана на сетевом поставщике HTTP::SOAP, другие поставщики
могут содержать больше или другие настройки.
                        </para>
                        <itemizedlist mark="round">
                            <listitem>
                                <para>
                                    Config: хранилище для конкретных параметров конфигурации транспортной сети.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    Тип: бэкэнд транспортной сети поставщика.
                                </para>
                            </listitem>
                        </itemizedlist>
                        <section>
                            <title>Config</title>
                            <itemizedlist mark="round">
                                <listitem>
                                    <para>
                                        MaxLength: максимальная длина в байтах для чтения SOAP-сообщений системой
OTRS.
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        NameSpace: URI , который дает контекст для всех операций, принадлежащих
этому веб-сервису.
                                    </para>
                                </listitem>
                            </itemizedlist>
                        </section>
                    </section>
                </section>
            </section>
        </section>

        <section>
            <title>Запрашиваемая сторона</title>
            <itemizedlist mark="round">
                <listitem>
                    <para>
                        Invoker: хранилище для настроек каждой метки.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Transport: хранилище для настроек транспортной сети запрашивающей стороны.
                    </para>
                </listitem>
            </itemizedlist>
            <section>
                <title>Запрашивающая сторона</title>
                <itemizedlist mark="round">
                    <listitem>
                        <para>
                            &lt;InvokerName&gt;: Уникальное имя для вызывающей стороны, хранилище для
своих собственых настроек (от 0..n, без повторов).
                        </para>
                    </listitem>
                </itemizedlist>
                <section>
                    <title>&lt;InvokerName&gt;</title>
                    <para>
                        Этот раздел основан на типе "Test::Test", другие invoker-ры могут иметь
больше или другие настройки.
                    </para>
                    <itemizedlist mark="round">
                        <listitem>
                            <para>
                                Description: a short text that describes the invoker.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                События: хранилище настроек не именованного списка действий.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                MappingInbound: хранилище для настроек отображаемых значений для данных
поступающих от ответов.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                MappingOutbound: хранилище для настроек отображаемых значений для исходящих
данных запроса.
                            </para>
                        </listitem>
                        <listitem>
                            <para>
                                Тип: invoker backend, в формате Controller::Invoker.
                            </para>
                        </listitem>
                    </itemizedlist>
                    <section>
                        <title>События</title>
                        <itemizedlist mark="round">
                            <listitem>
                                <para>
                                    <remark>List Element</remark>: (cardinality 0 .. n).
                                </para>
                                <itemizedlist mark="round">
                                    <listitem>
                                        <para>
                                            Asynchronous: to set if the invoker execution will be delegated to the OTRS
Daemon.
                                        </para>
                                        <itemizedlist mark="round">
                                            <title>Возможные значения</title>
                                            <listitem>
                                                <para>
                                                    0: not handled by the OTRS Daemon.
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    1: handled by the OTRS Daemon.
                                                </para>
                                            </listitem>
                                        </itemizedlist>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            Event: имя события триггера.
                                        </para>
                                        <itemizedlist>
                                            <title>Возможные Значения (для событий заявки)</title>
                                            <listitem>
                                                <para>
                                                    TicketCreate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketDelete
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketTitleUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketUnlockTimeoutUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketQueueUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketTypeUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketServiceUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketSLAUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketCustomerUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketFreeTextUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketFreeTimeUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketPendingTimeUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketLockUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketArchiveFlagUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketStateUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketOwnerUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketResponsibleUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketPriorityUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    HistoryAdd
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    HistoryDelete
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketAccountTime
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketMerge
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketSubscribe
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketUnsubscribe
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketFlagSet
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketFlagDelete
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketSlaveLinkAdd
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketSlaveLinkDelete
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    TicketMasterLinkDelete
                                                </para>
                                            </listitem>
                                        </itemizedlist>
                                        <itemizedlist>
                                            <title>Возможные Значения (для действий над статьями)</title>
                                            <listitem>
                                                <para>
                                                    ArticleCreate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleFreeTextUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleUpdate
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleSend
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleBounce
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleAgentNotification
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleCustomerNotification
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleAutoResponse
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleFlagSet
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleFlagDelete
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleAgentNotification
                                                </para>
                                            </listitem>
                                            <listitem>
                                                <para>
                                                    ArticleCustomerNotification
                                                </para>
                                            </listitem>
                                        </itemizedlist>
                                    </listitem>
                                </itemizedlist>
                            </listitem>
                        </itemizedlist>
                    </section>
                    <section>
                        <title>MappingInbound</title>
                        <para>
                            Тоже что и Действие MappingInbound.
                        </para>
                    </section>
                    <section>
                        <title>MappingOutbound</title>
                        <para>
                            Тоже что и Действие MappingInbound.
                        </para>
                    </section>
                    <section>
                        <title>Передача</title>
                        <para>
                            Этот раздел основан на транспортной сети запрашивающей стороны HTTP::SOAP,
транспортные сети могут содержать больше или другие настройки.
                        </para>
                        <itemizedlist mark="round">
                            <listitem>
                                <para>
                                    Config: хранилище для конкретных параметров конфигурации транспортной сети.
                                </para>
                            </listitem>
                            <listitem>
                                <para>
                                    Тип: бэкэнд транспортной сети запрашивающей стороны.
                                </para>
                            </listitem>
                        </itemizedlist>
                        <section>
                            <title>Config</title>
                            <itemizedlist mark="round">
                                <listitem>
                                    <para>
                                        Аутентификация: хранилище для настроек аутентификации.
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        Encoding: the SOAP Message request encoding.
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        Endpoint: the URI of the Remote Server web service to accept OTRS requests.
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        NameSpace: URI который предоставлят связь для всех invoker-ов, которые
принадлежат этому веб-серверу.
                                    </para>
                                </listitem>
                                <listitem>
                                    <para>
                                        SOAPAction: для отправки пустого или заполненого SOAPAction-заголовка в
формате SOAP сообщения (in "&lt;NameSpace&gt; &lt;Separator&gt;
&lt;Action&gt;" format).
                                    </para>
                                    <itemizedlist mark="round">
                                        <title>Возможные значения</title>
                                        <listitem>
                                            <para>
                                                Yes: to send a filled SOAPAction header.
                                            </para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                No: для отправки пустого обработчика SOAP-действия.
                                            </para>
                                        </listitem>
                                    </itemizedlist>
                                </listitem>
                                <listitem>
                                    <para>
                                        SOAPActionSeparator: для установки &lt;Separator&gt; из заполненых
SOAPAction заголовков.
                                    </para>
                                    <itemizedlist mark="round">
                                        <title>Возможные значения</title>
                                        <listitem>
                                            <para>
                                                '/': используется для .net веб-сервисов.
                                            </para>
                                        </listitem>
                                        <listitem>
                                            <para>
                                                '#': используется для всех веб-сервисов на базе протокола REST.
                                            </para>
                                        </listitem>
                                    </itemizedlist>
                                </listitem>
                            </itemizedlist>
                            <section>
                                <title>Authentication</title>
                                <itemizedlist mark="round">
                                    <listitem>
                                        <para>
                                            User: имя привилегированого пользователя, который имеет доступ к удаленному
веб-сервису.
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            Пароль: пароль для привелигированого пользователя в формате обычного текста.
                                        </para>
                                    </listitem>
                                    <listitem>
                                        <para>
                                            Тип: тип аутентификации.
                                        </para>
                                    </listitem>
                                </itemizedlist>
                            </section>
                        </section>
                    </section>
                </section>
            </section>
        </section>

    </section>
</section>
